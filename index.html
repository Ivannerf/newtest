<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>3D CSS-Like Content in AR</title>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">



  <script type="module">
    import * as THREE from 'https://cdn.jsdelivr.net/npm/three@0.154.0/build/three.module.js';
    import { ARButton } from 'https://cdn.jsdelivr.net/npm/three@0.154.0/examples/jsm/webxr/ARButton.js';

    // Set up the WebGL renderer
    const renderer = new THREE.WebGLRenderer({ alpha: true });
    renderer.xr.enabled = true;
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);

    // Create a scene and camera
    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(70, window.innerWidth / window.innerHeight, 0.01, 20);

    // Add AR Button
    const arButton = ARButton.createButton(renderer, {
      requiredFeatures: ['hit-test'],
    });
    document.body.appendChild(arButton);

    // Create a canvas and set a white background
    const canvas = document.createElement('canvas');
    canvas.width = 1024;
    canvas.height = 1024;
    const ctx = canvas.getContext('2d');

    // Function to draw rounded rectangle without a frame (no stroke)
    function drawRoundedRect(ctx, x, y, width, height, radius) {
      ctx.beginPath();
      ctx.moveTo(x + radius, y);
      ctx.lineTo(x + width - radius, y);
      ctx.quadraticCurveTo(x + width, y, x + width, y + radius);
      ctx.lineTo(x + width, y + height - radius);
      ctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);
      ctx.lineTo(x + radius, y + height);
      ctx.quadraticCurveTo(x, y + height, x, y + height - radius);
      ctx.lineTo(x, y + radius);
      ctx.quadraticCurveTo(x, y, x + radius, y);
      ctx.closePath();
      ctx.fill(); // No stroke, just fill the inside
    }

        // Function to wrap text within a given width
        function wrapText(ctx, text, x, y, maxWidth, lineHeight) {
      const words = text.split(' ');
      let line = '';
      let lines = [];

      // Loop through each word and create lines
      for (let i = 0; i < words.length; i++) {
        let testLine = line + words[i] + ' ';
        let testWidth = ctx.measureText(testLine).width;
        
        if (testWidth > maxWidth && i > 0) {
          lines.push(line);  // Add the current line to the lines array
          line = words[i] + ' '; // Start a new line with the current word
        } else {
          line = testLine; // Continue adding the word to the current line
        }
      }
      
      // Push the last line
      lines.push(line);

      // Draw the lines on the canvas
      for (let j = 0; j < lines.length; j++) {
        ctx.fillText(lines[j], x, y + (j * lineHeight));  // Draw each line with a lineHeight space
      }
    }

    // Set background color and draw a rounded rectangle (white, no stroke)
    ctx.fillStyle = '#ffffff'; // White background color
    drawRoundedRect(ctx, 80, 80, 844, 844, 40); // Draw a rounded rectangle with a radius of 40px and adjusted positions

    // Set text color to black and draw text
    ctx.fillStyle = '#000000';  // Black text color
    ctx.font = '800 48px "Inter"';  // 700 = Bold weight



    ctx.textAlign = 'left'; // Change alignment to left
    ctx.textBaseline = 'middle';
    ctx.fillText('Nike Pegasus Trail 4', 130, 150,);  // Increased left margin to 80px
    ctx.fillText('139 â‚¬', 130, 225);  // Increased left margin to 80px

    ctx.fillStyle = '#000000';  // Black text color
    ctx.font = '300 30px "Inter"';  // Light (300)

    // Set maximum width of the text to 800px
    const maxWidth = 700;
    const lineHeight = 32;  // Space between lines

    // Wrap the long text into multiple lines
    wrapText(ctx, 'Fast and stable trail running shoes with a slim fit. The upper in lightweight and breathable mesh provides a cool and comfortable feel. The toe area is reinforced with extra rubber for increased durability and to better withstand wear from branches and rocks. The shoes are equipped with Flywire cables that work with the lacing to provide a tight and stable fit.', 130, 300, maxWidth, lineHeight);

    // Create a texture from the canvas
    const texture = new THREE.CanvasTexture(canvas);
    texture.minFilter = THREE.LinearFilter;
    texture.magFilter = THREE.LinearFilter;

    // Create a material with the texture
    const material = new THREE.MeshBasicMaterial({
      map: texture,    // Apply the canvas texture with white background and rounded corners
      side: THREE.DoubleSide,
      transparent: true, // Ensure transparency is enabled to prevent any unwanted background
    });

    // Create a plane geometry for the text
    const geometry = new THREE.PlaneGeometry(0.8, 1);
    const textMesh = new THREE.Mesh(geometry, material);
    textMesh.position.set(0, 0, -1); // Position in front of the camera
    scene.add(textMesh);

    // XR Controller (optional for interaction)
    const controller = renderer.xr.getController(0);
    scene.add(controller);

    // Animation loop for the scene
    function animate() {
      renderer.setAnimationLoop(() => {
        renderer.render(scene, camera);
      });
    }

    animate();
  </script>

  <style>
    body {
      margin: 0;
      font-family: 'Inter', sans-serif;
      background-color: #f0f0f0;
      overflow: hidden;
    }
  </style>
</head>
<body>
  <h1>3D CSS-Like Content in AR</h1>
</body>
</html>

